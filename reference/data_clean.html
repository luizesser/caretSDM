<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Presence data cleaning routine — data_clean • caretSDM</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Presence data cleaning routine — data_clean"><meta name="description" content="Data cleaning wrapper using CoordinateCleaner package."><meta property="og:description" content="Data cleaning wrapper using CoordinateCleaner package."><meta property="og:image" content="https://luizesser.github.io/caretSDM/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">caretSDM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Araucaria.html">caretSDM Workflow for Species Distribution Modeling</a></li>
    <li><a class="dropdown-item" href="../articles/Salminus.html">Modeling Species Distributions in Continental Water Bodies</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/luizesser/caretSDM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Presence data cleaning routine</h1>
      <small class="dont-index">Source: <a href="https://github.com/luizesser/caretSDM/blob/main/R/data_clean.R" class="external-link"><code>R/data_clean.R</code></a></small>
      <div class="d-none name"><code>data_clean.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Data cleaning wrapper using CoordinateCleaner package.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">data_clean</span><span class="op">(</span><span class="va">occ</span>, pred <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           species <span class="op">=</span> <span class="cn">NA</span>, lon <span class="op">=</span> <span class="cn">NA</span>, lat <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>           capitals <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           centroids <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           duplicated <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           identical <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           institutions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           invalid <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           terrestrial <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           independent_test <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-occ">occ<a class="anchor" aria-label="anchor" href="#arg-occ"></a></dt>
<dd><p>A <code>occurrences_sdm</code> object or <code>input_sdm</code>.</p></dd>


<dt id="arg-pred">pred<a class="anchor" aria-label="anchor" href="#arg-pred"></a></dt>
<dd><p>A <code>sdm_area</code> object. If <code>occ</code> is a <code>input_sdm</code> object with
predictors data, than <code>pred</code> is obtained from it.</p></dd>


<dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>A <code>character</code> stating the name of the column with species names in <code>occ</code> (see details).</p></dd>


<dt id="arg-lon">lon<a class="anchor" aria-label="anchor" href="#arg-lon"></a></dt>
<dd><p>A <code>character</code> stating the name of the column with longitude in <code>occ</code> (see details).</p></dd>


<dt id="arg-lat">lat<a class="anchor" aria-label="anchor" href="#arg-lat"></a></dt>
<dd><p>A <code>character</code> stating the name of the column with latitude in <code>occ</code> (see details).</p></dd>


<dt id="arg-capitals">capitals<a class="anchor" aria-label="anchor" href="#arg-capitals"></a></dt>
<dd><p>Boolean to turn on/off the exclusion from countries capitals coordinates (see <code>?cc_cap</code>)</p></dd>


<dt id="arg-centroids">centroids<a class="anchor" aria-label="anchor" href="#arg-centroids"></a></dt>
<dd><p>Boolean to turn on/off the exclusion from countries centroids coordinates (see <code>?cc_cen</code>)</p></dd>


<dt id="arg-duplicated">duplicated<a class="anchor" aria-label="anchor" href="#arg-duplicated"></a></dt>
<dd><p>Boolean to turn on/off the exclusion from duplicated records (see <code>?cc_dupl</code>)</p></dd>


<dt id="arg-identical">identical<a class="anchor" aria-label="anchor" href="#arg-identical"></a></dt>
<dd><p>Boolean to turn on/off the exclusion from records with identical lat/long values (see <code>?cc_equ</code>)</p></dd>


<dt id="arg-institutions">institutions<a class="anchor" aria-label="anchor" href="#arg-institutions"></a></dt>
<dd><p>Boolean to turn on/off the exclusion from biodiversity institutions coordinates (see <code>?cc_inst</code>)</p></dd>


<dt id="arg-invalid">invalid<a class="anchor" aria-label="anchor" href="#arg-invalid"></a></dt>
<dd><p>Boolean to turn on/off the exclusion from invalid coordinates (see <code>?cc_val</code>)</p></dd>


<dt id="arg-terrestrial">terrestrial<a class="anchor" aria-label="anchor" href="#arg-terrestrial"></a></dt>
<dd><p>Boolean to turn on/off the exclusion from coordinates falling on sea (see <code>?cc_sea</code>)</p></dd>


<dt id="arg-independent-test">independent_test<a class="anchor" aria-label="anchor" href="#arg-independent-test"></a></dt>
<dd><p>Boolean. If <code>occ</code> has independent test data, the data cleaning routine
is also applied on it.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>occurrences_sdm</code> object or <code>input_sdm</code> with cleaned presence data.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If the user does not used <code>GBIF_data</code> function to obtain species records, the function may
have problems to find which column from the presences table has species, longitude and latitude
information. In this regard, we implemented the parameters <code>species</code>, <code>lon</code> and
<code>lat</code> so the use can explicitly inform which columns should be used. If they remain as NA
(standard) the function will try to guess which columns are the correct one.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="GBIF_data.html">GBIF_data</a> <a href="occurrences_sdm.html">occurrences_sdm</a> <a href="sdm_area.html">sdm_area</a> <a href="input_sdm.html">input_sdm</a>
<a href="predictor_names.html">predictors</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Luíz Fernando Esser (luizesser@gmail.com)
https://luizfesser.wordpress.com</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create sdm_area object:</span></span></span>
<span class="r-in"><span><span class="va">sa</span> <span class="op">&lt;-</span> <span class="fu"><a href="sdm_area.html">sdm_area</a></span><span class="op">(</span><span class="va">parana</span>, cell_size <span class="op">=</span> <span class="fl">25000</span>, crs <span class="op">=</span> <span class="fl">6933</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Making grid over study area is an expensive task. Please, be patient!</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Using GDAL to make the grid and resample the variables.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Include predictors:</span></span></span>
<span class="r-in"><span><span class="va">sa</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_predictors.html">add_predictors</a></span><span class="op">(</span><span class="va">sa</span>, <span class="va">bioc</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bio1"</span>, <span class="st">"bio4"</span>, <span class="st">"bio12"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Making grid over the study area is an expensive task. Please, be patient!</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Using GDAL to make the grid and resample the variables.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Include scenarios:</span></span></span>
<span class="r-in"><span><span class="va">sa</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_scenarios.html">add_scenarios</a></span><span class="op">(</span><span class="va">sa</span>, <span class="va">scen</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create occurrences:</span></span></span>
<span class="r-in"><span><span class="va">oc</span> <span class="op">&lt;-</span> <span class="fu"><a href="occurrences_sdm.html">occurrences_sdm</a></span><span class="op">(</span><span class="va">occ</span>, crs <span class="op">=</span> <span class="fl">6933</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="join_area.html">join_area</a></span><span class="op">(</span><span class="va">sa</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Some records from `occ` do not fall in `pred`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> 2 elements from `occ` were excluded.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> If this seems too much, check how `occ` and `pred` intersect.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create input_sdm:</span></span></span>
<span class="r-in"><span><span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="input_sdm.html">input_sdm</a></span><span class="op">(</span><span class="va">oc</span>, <span class="va">sa</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Clean coordinates:</span></span></span>
<span class="r-in"><span><span class="va">i</span> <span class="op">&lt;-</span> <span class="fu">data_clean</span><span class="op">(</span><span class="va">i</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Cell_ids identified, removing duplicated cell_id.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Testing country capitals</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removed 0 records.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Testing country centroids</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removed 0 records.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Testing duplicates</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removed 0 records.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Testing equal lat/lon</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removed 0 records.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Testing biodiversity institutions</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removed 1 records.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Testing coordinate validity</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removed 0 records.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Testing sea coordinates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reading layer `ne_110m_land' from data source `/tmp/RtmpPYov8D/ne_110m_land.shp' using driver `ESRI Shapefile'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 127 features and 3 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: POLYGON</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: -180 ymin: -90 xmax: 180 ymax: 83.64513</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geodetic CRS:  WGS 84</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removed 0 records.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Predictors identified, procceding with grid filter (removing NA and duplicated data).</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dayani Bailly, Edivando Couto, José Hilário Delconte Ferreira, Reginaldo Ré, Valéria Batista, Luíz Fernando Esser.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

